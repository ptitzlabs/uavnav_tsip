<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSIP Decoder: tsip_decode.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TSIP Decoder
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tsip_decode.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header containing the decoding functions. The main decoder code is contained here.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;string.h&quot;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="tsip__read_8h_source.html">tsip_read.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tsip_decode.h:</div>
<div class="dyncontent">
<div class="center"><img src="tsip__decode_8h__incl.png" border="0" usemap="#tsip__decode_8h" alt=""/></div>
<map name="tsip__decode_8h" id="tsip__decode_8h">
<area shape="rect" id="node6" href="tsip__read_8h.html" title="Header containing the testing functions. These functions are designed to simulate the UAV parser and ..." alt="" coords="331,80,419,107"/>
<area shape="rect" id="node8" href="util_8h.html" title="Header containing the utility functions. Various utility functions, including the CRC checker..." alt="" coords="436,155,485,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="tsip__decode_8h__dep__incl.png" border="0" usemap="#tsip__decode_8hdep" alt=""/></div>
<map name="tsip__decode_8hdep" id="tsip__decode_8hdep">
<area shape="rect" id="node2" href="uavnav__main_8c.html" title="Main tester application. Loads the test data files, runs tests, outputs the. " alt="" coords="5,80,120,107"/>
</map>
</div>
</div>
<p><a href="tsip__decode_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab60b5074c740fd36061f48f90d1a0b21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#ab60b5074c740fd36061f48f90d1a0b21">N_THREADS</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ab60b5074c740fd36061f48f90d1a0b21"><td class="mdescLeft">&#160;</td><td class="mdescRight">[Setup parameters]  <a href="#ab60b5074c740fd36061f48f90d1a0b21">More...</a><br /></td></tr>
<tr class="separator:ab60b5074c740fd36061f48f90d1a0b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="memdesc:ad51ded0bbd705f02f73fc60c0b721ced"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data block size to be processed by a single thread.  <a href="#ad51ded0bbd705f02f73fc60c0b721ced">More...</a><br /></td></tr>
<tr class="separator:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a11ffedda6862cc09621931092dbaf5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a1a11ffedda6862cc09621931092dbaf5">MAX_COM_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:a1a11ffedda6862cc09621931092dbaf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum allowable raw data size.  <a href="#a1a11ffedda6862cc09621931092dbaf5">More...</a><br /></td></tr>
<tr class="separator:a1a11ffedda6862cc09621931092dbaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f68e96fb938eddc39ad1f19d923a96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a87f68e96fb938eddc39ad1f19d923a96">MAX_DATA_SIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a87f68e96fb938eddc39ad1f19d923a96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum allowable decoded data size.  <a href="#a87f68e96fb938eddc39ad1f19d923a96">More...</a><br /></td></tr>
<tr class="separator:a87f68e96fb938eddc39ad1f19d923a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>&#160;&#160;&#160;false</td></tr>
<tr class="memdesc:ad72dbcf6d0153db1b8d8a58001feed83"><td class="mdescLeft">&#160;</td><td class="mdescRight">[Setup parameters]  <a href="#ad72dbcf6d0153db1b8d8a58001feed83">More...</a><br /></td></tr>
<tr class="separator:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ac1accdfaf17cd8ccf452c605fa935233"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233">validate_error</a> { <a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233ab7e4e0120a041dbe6528b050c04269e0">none</a>, 
<a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233a06e8eebf569c66387fe7e38059ceed79">size_mismatch</a>, 
<a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233aa7c3ec9f75a85e0e38eb97a1d7bd7490">illegal_id</a>, 
<a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233a732565fcd9231ccc944acf3624b80300">chksum_mismatch</a>
 }<tr class="memdesc:ac1accdfaf17cd8ccf452c605fa935233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validation error types.  <a href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ac1accdfaf17cd8ccf452c605fa935233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaadb960acba914ffc497ac7b256cdd55"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#aaadb960acba914ffc497ac7b256cdd55">flag_type_enum</a> { <a class="el" href="tsip__decode_8h.html#aaadb960acba914ffc497ac7b256cdd55a4b507f9b9a7feb19dc7248d7de612717">start_flag</a>, 
<a class="el" href="tsip__decode_8h.html#aaadb960acba914ffc497ac7b256cdd55a5ed0c9e4189b86c84f9ded0501e9dd18">end_flag</a>
 }<tr class="memdesc:aaadb960acba914ffc497ac7b256cdd55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special character flag types.  <a href="tsip__decode_8h.html#aaadb960acba914ffc497ac7b256cdd55">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aaadb960acba914ffc497ac7b256cdd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a41c4ae0abb32c8c722925578007e711b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a41c4ae0abb32c8c722925578007e711b">validate_packet</a> (const uint8_t *buffer, const uint32_t start, const uint32_t end)</td></tr>
<tr class="memdesc:a41c4ae0abb32c8c722925578007e711b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the packet.  <a href="#a41c4ae0abb32c8c722925578007e711b">More...</a><br /></td></tr>
<tr class="separator:a41c4ae0abb32c8c722925578007e711b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa67c1cf61103414427db3eb35b74db60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#aa67c1cf61103414427db3eb35b74db60">data_read</a> (uint8_t *raw, uint32_t *raw_len, uint8_t id)</td></tr>
<tr class="memdesc:aa67c1cf61103414427db3eb35b74db60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the recieved raw data, multithread-protected.  <a href="#aa67c1cf61103414427db3eb35b74db60">More...</a><br /></td></tr>
<tr class="separator:aa67c1cf61103414427db3eb35b74db60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38a027d040fb45e1614b59144351d34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#af38a027d040fb45e1614b59144351d34">packet_decode</a> (uint8_t *processed, uint32_t *processed_len, uint8_t *raw, uint32_t *raw_len, uint32_t *flag, uint8_t *flag_type, uint32_t *flag_count, bool *hanging_dle)</td></tr>
<tr class="memdesc:af38a027d040fb45e1614b59144351d34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process raw data.  <a href="#af38a027d040fb45e1614b59144351d34">More...</a><br /></td></tr>
<tr class="separator:af38a027d040fb45e1614b59144351d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812dd629379f16c30e1dba03db6745fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a812dd629379f16c30e1dba03db6745fc">hanging_dle_test</a> (uint8_t *processed, uint32_t processed_len, uint32_t *flag, uint8_t *flag_type, uint32_t *flag_count)</td></tr>
<tr class="memdesc:a812dd629379f16c30e1dba03db6745fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test for special condition that the previous block ended on a DLE.  <a href="#a812dd629379f16c30e1dba03db6745fc">More...</a><br /></td></tr>
<tr class="separator:a812dd629379f16c30e1dba03db6745fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34dd84879b0a89a108bcdce9cd5b20b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#af34dd84879b0a89a108bcdce9cd5b20b">trailing_data_store</a> (uint8_t *processed, uint32_t processed_len, uint32_t *flag, uint8_t *flag_type, uint32_t *flag_count, bool hanging_dle)</td></tr>
<tr class="memdesc:af34dd84879b0a89a108bcdce9cd5b20b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the trailing data.  <a href="#af34dd84879b0a89a108bcdce9cd5b20b">More...</a><br /></td></tr>
<tr class="separator:af34dd84879b0a89a108bcdce9cd5b20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9f28f133c97a87d0aa0ee8b1ba82fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a2b9f28f133c97a87d0aa0ee8b1ba82fe">data_parse</a> (uint8_t *processed, uint32_t processed_len, uint32_t *flag, uint8_t *flag_type, uint32_t *flag_count, uint8_t id, bool hanging_dle)</td></tr>
<tr class="memdesc:a2b9f28f133c97a87d0aa0ee8b1ba82fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the decoded data, multithread-protected.  <a href="#a2b9f28f133c97a87d0aa0ee8b1ba82fe">More...</a><br /></td></tr>
<tr class="separator:a2b9f28f133c97a87d0aa0ee8b1ba82fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e6599a2b96dd309e86e6fbb868a5d8"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a12e6599a2b96dd309e86e6fbb868a5d8">extract_data</a> (void *tid)</td></tr>
<tr class="memdesc:a12e6599a2b96dd309e86e6fbb868a5d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data processing thread function.  <a href="#a12e6599a2b96dd309e86e6fbb868a5d8">More...</a><br /></td></tr>
<tr class="separator:a12e6599a2b96dd309e86e6fbb868a5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f61d2ad114da50125b6b5816a52a3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tsip__decode_8h.html#a15f61d2ad114da50125b6b5816a52a3d">TaskUpLink200Hz</a> ()</td></tr>
<tr class="memdesc:a15f61d2ad114da50125b6b5816a52a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decoder task periodic function.  <a href="#a15f61d2ad114da50125b6b5816a52a3d">More...</a><br /></td></tr>
<tr class="separator:a15f61d2ad114da50125b6b5816a52a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header containing the decoding functions. The main decoder code is contained here. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad51ded0bbd705f02f73fc60c0b721ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad51ded0bbd705f02f73fc60c0b721ced">&#9670;&nbsp;</a></span>BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCK_SIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data block size to be processed by a single thread. </p>

</div>
</div>
<a id="ad72dbcf6d0153db1b8d8a58001feed83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad72dbcf6d0153db1b8d8a58001feed83">&#9670;&nbsp;</a></span>DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG&#160;&#160;&#160;false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>[Setup parameters] </p>
<p>Debug flag. </p>

</div>
</div>
<a id="a1a11ffedda6862cc09621931092dbaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a11ffedda6862cc09621931092dbaf5">&#9670;&nbsp;</a></span>MAX_COM_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_COM_SIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum allowable raw data size. </p>

</div>
</div>
<a id="a87f68e96fb938eddc39ad1f19d923a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87f68e96fb938eddc39ad1f19d923a96">&#9670;&nbsp;</a></span>MAX_DATA_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DATA_SIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum allowable decoded data size. </p>

</div>
</div>
<a id="ab60b5074c740fd36061f48f90d1a0b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab60b5074c740fd36061f48f90d1a0b21">&#9670;&nbsp;</a></span>N_THREADS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_THREADS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>[Setup parameters] </p>
<p>Number of concurrent threads. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aaadb960acba914ffc497ac7b256cdd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaadb960acba914ffc497ac7b256cdd55">&#9670;&nbsp;</a></span>flag_type_enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tsip__decode_8h.html#aaadb960acba914ffc497ac7b256cdd55">flag_type_enum</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special character flag types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aaadb960acba914ffc497ac7b256cdd55a4b507f9b9a7feb19dc7248d7de612717"></a>start_flag&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aaadb960acba914ffc497ac7b256cdd55a5ed0c9e4189b86c84f9ded0501e9dd18"></a>end_flag&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="ac1accdfaf17cd8ccf452c605fa935233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1accdfaf17cd8ccf452c605fa935233">&#9670;&nbsp;</a></span>validate_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tsip__decode_8h.html#ac1accdfaf17cd8ccf452c605fa935233">validate_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validation error types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ac1accdfaf17cd8ccf452c605fa935233ab7e4e0120a041dbe6528b050c04269e0"></a>none&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac1accdfaf17cd8ccf452c605fa935233a06e8eebf569c66387fe7e38059ceed79"></a>size_mismatch&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac1accdfaf17cd8ccf452c605fa935233aa7c3ec9f75a85e0e38eb97a1d7bd7490"></a>illegal_id&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac1accdfaf17cd8ccf452c605fa935233a732565fcd9231ccc944acf3624b80300"></a>chksum_mismatch&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2b9f28f133c97a87d0aa0ee8b1ba82fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9f28f133c97a87d0aa0ee8b1ba82fe">&#9670;&nbsp;</a></span>data_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void data_parse </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>processed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>processed_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flag_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hanging_dle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the decoded data, multithread-protected. </p>
<p>Format the data, run the checks on the preceding data block. Run the validation checks. Parse the data if it's correct. Store the trailing part that has not been parsed. Only one thread can parse the data at a time to make sure that it's parsed in the same order as it comes in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">processed</td><td>Pointer to processed data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">processed_len</td><td>Size of processed data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>Pointer to flags, contains flag locations. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag_type</td><td>Types of marked flags. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag_count</td><td>Number of flags. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Thread id. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hanging_dle</td><td>Hanging DLE character indicator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>[Checking previous buffer]</p>
<p>[Checking previous buffer]</p>
<p>[Checking uninterrupted packets]</p>
<p>[Checking uninterrupted packets] </p>

</div>
</div>
<a id="aa67c1cf61103414427db3eb35b74db60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67c1cf61103414427db3eb35b74db60">&#9670;&nbsp;</a></span>data_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void data_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>raw_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the recieved raw data, multithread-protected. </p>
<p>Read the data. Only one thread is allowed to read data at a time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw</td><td>Pointer to raw data destination. </td></tr>
    <tr><td class="paramname">raw_len</td><td>Pointer to the size of the data read. </td></tr>
    <tr><td class="paramname">id</td><td>Thread id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error type, 0 if no errors are found. </dd></dl>
<p>[Reading COM data]</p>
<p>[Reading COM data] </p>

</div>
</div>
<a id="a12e6599a2b96dd309e86e6fbb868a5d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e6599a2b96dd309e86e6fbb868a5d8">&#9670;&nbsp;</a></span>extract_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* extract_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data processing thread function. </p>
<p>Thread function tasked with reading, decoding and parsing the data. Only one thread can read or parse the data at a time, while the decoding is done concurrently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tid</td><td>Thread id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a812dd629379f16c30e1dba03db6745fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a812dd629379f16c30e1dba03db6745fc">&#9670;&nbsp;</a></span>hanging_dle_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hanging_dle_test </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>processed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>processed_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flag_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test for special condition that the previous block ended on a DLE. </p>
<p>Check if the previous raw data block ended on a DLE. Correct the following data block structure and data to match the trailing DLE character.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">processed</td><td>Pointer to processed data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">processed_len</td><td>Size of processed data </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flag</td><td>Pointer to flags, contains flag locations </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flag_type</td><td>Types of marked flags </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flag_count</td><td>Number of flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>[Checking hanging DLE flags]</p>
<p>[Checking hanging DLE flags] </p>

</div>
</div>
<a id="af38a027d040fb45e1614b59144351d34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af38a027d040fb45e1614b59144351d34">&#9670;&nbsp;</a></span>packet_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void packet_decode </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>processed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>processed_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>raw_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flag_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>hanging_dle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process raw data. </p>
<p>Process the raw data, removing the escape characters and marking packet start and end points</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">processed</td><td>Pointer to destination. </td></tr>
    <tr><td class="paramname">processed_len</td><td>Size of processed data. </td></tr>
    <tr><td class="paramname">raw</td><td>Pointer to source raw data. </td></tr>
    <tr><td class="paramname">raw_len</td><td>Size of source data. </td></tr>
    <tr><td class="paramname">flag</td><td>Pointer to flags, contains flag locations. </td></tr>
    <tr><td class="paramname">flag_type</td><td>Types of marked flags. </td></tr>
    <tr><td class="paramname">flag_count</td><td>Number of flags. </td></tr>
    <tr><td class="paramname">hanging_dle</td><td>A flag to indicate a hanging DLE character. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>[Removing escape characters]</p>
<p>[Removing escape characters] </p>

</div>
</div>
<a id="a15f61d2ad114da50125b6b5816a52a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f61d2ad114da50125b6b5816a52a3d">&#9670;&nbsp;</a></span>TaskUpLink200Hz()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskUpLink200Hz </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decoder task periodic function. </p>
<p>This function spawns several decoder threads</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>[Starting threads]</p>
<p>[Starting threads] </p>

</div>
</div>
<a id="af34dd84879b0a89a108bcdce9cd5b20b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34dd84879b0a89a108bcdce9cd5b20b">&#9670;&nbsp;</a></span>trailing_data_store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trailing_data_store </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>processed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>processed_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flag_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>flag_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hanging_dle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store the trailing data. </p>
<p>If no DLE/ETX combo is found at the end of the packet, pass on it's trailing part to the next evaluation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">processed</td><td>Pointer to processed data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">processed_len</td><td>Size of processed data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>Pointer to flags, contains flag locations. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag_type</td><td>Types of marked flags. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag_count</td><td>Number of flags. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hanging_dle</td><td>Hanging DLE character indicator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>[Storing trailing data]</p>
<p>[Storing trailing data] </p>

</div>
</div>
<a id="a41c4ae0abb32c8c722925578007e711b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c4ae0abb32c8c722925578007e711b">&#9670;&nbsp;</a></span>validate_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t validate_packet </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate the packet. </p>
<p>Check the packet integrity, correct size and parameters. Run a CRC check.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to packet source. </td></tr>
    <tr><td class="paramname">start</td><td>Packet data start. </td></tr>
    <tr><td class="paramname">end</td><td>Packet data end. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error type, 0 if no errors are found. </dd></dl>
<p>[Validating packet]</p>
<p>[Validating packet] </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
